# RustChat - ç°ä»£åŒ–èŠå¤©è½¯ä»¶

åŸºäºRustçš„ç°ä»£åŒ–èŠå¤©è½¯ä»¶ï¼Œé‡‡ç”¨æ¸è¿›å¼å¼€å‘ç­–ç•¥ã€‚

## ğŸ¯ å½“å‰ç‰ˆæœ¬: v0.1.0 (M0 - "Hello World" åŸå‹)

### âœ… å·²å®ç°åŠŸèƒ½

#### USER-001: UUIDç”¨æˆ·æ ‡è¯†ç”Ÿæˆ
- âœ… UUIDç”¨æˆ·IDç”Ÿæˆå’Œç®¡ç†
- âœ… ç”¨æˆ·é…ç½®æœ¬åœ°å­˜å‚¨ (`~/.rustchat/config.json`)
- âœ… æœåŠ¡å™¨ç«¯ä¸ºæ–°è¿æ¥è¿”å›UUID
- âœ… å®¢æˆ·ç«¯æ¥æ”¶å¹¶ä¿å­˜ç”¨æˆ·ID

### ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
rustchat/
â”œâ”€â”€ Cargo.toml              # å·¥ä½œç©ºé—´é…ç½®
â”œâ”€â”€ crates/
â”‚   â”œâ”€â”€ rustchat-types/     # å…±äº«ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ user.rs     # ç”¨æˆ·IDç±»å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ message.rs  # æ¶ˆæ¯ç±»å‹
â”‚   â”‚   â”‚   â””â”€â”€ lib.rs
â”‚   â”‚   â””â”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ rustchat-core/      # æ ¸å¿ƒåŠŸèƒ½åº“
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ user.rs     # ç”¨æˆ·é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ lib.rs
â”‚   â”‚   â””â”€â”€ Cargo.toml
â”‚   â”œâ”€â”€ rustchat-server/    # WebSocketæœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â””â”€â”€ main.rs     # æœåŠ¡å™¨ä¸»ç¨‹åº
â”‚   â”‚   â””â”€â”€ Cargo.toml
â”‚   â””â”€â”€ rustchat-cli/       # å‘½ä»¤è¡Œå®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â””â”€â”€ main.rs     # CLIä¸»ç¨‹åº
â”‚       â””â”€â”€ Cargo.toml
â””â”€â”€ README.md
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Rust 1.70+ 
- Cargo

### æ„å»ºé¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd rustchat

# æ„å»ºæ‰€æœ‰ç»„ä»¶
cargo build --release
```

### è¿è¡ŒæœåŠ¡å™¨

```bash
# å¯åŠ¨WebSocketæœåŠ¡å™¨
cargo run --bin rustchatd

# æˆ–è€…ä½¿ç”¨å‘å¸ƒç‰ˆæœ¬
cargo run --bin rustchatd --release
```

æœåŠ¡å™¨å°†åœ¨ä»¥ä¸‹åœ°å€å¯åŠ¨ï¼š
- WebSocket: `ws://127.0.0.1:8080/ws`
- å¥åº·æ£€æŸ¥: `http://127.0.0.1:8080/health`

### è¿è¡Œå®¢æˆ·ç«¯

åœ¨æ–°çš„ç»ˆç«¯çª—å£ä¸­ï¼š

```bash
# å¯åŠ¨CLIå®¢æˆ·ç«¯
cargo run --bin rustchat-cli

# æˆ–è€…ä½¿ç”¨å‘å¸ƒç‰ˆæœ¬
cargo run --bin rustchat-cli --release
```

### ä½¿ç”¨è¯´æ˜

1. **é¦–æ¬¡è¿è¡Œ**: å®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ç”ŸæˆUUIDå¹¶ä¿å­˜åˆ° `~/.rustchat/config.json`
2. **è®¾ç½®æ˜µç§°**: è¾“å…¥ `/nick <ä½ çš„æ˜µç§°>`
3. **å‘é€æ¶ˆæ¯**: ç›´æ¥è¾“å…¥æ–‡æœ¬æ¶ˆæ¯
4. **æŸ¥çœ‹å¸®åŠ©**: è¾“å…¥ `/help`
5. **é€€å‡ºç¨‹åº**: è¾“å…¥ `/quit`

## ğŸ§ª æµ‹è¯•åŒç»ˆç«¯èŠå¤©

1. å¯åŠ¨æœåŠ¡å™¨ï¼š
   ```bash
   cargo run --bin rustchatd
   ```

2. æ‰“å¼€ç¬¬ä¸€ä¸ªå®¢æˆ·ç«¯ï¼š
   ```bash
   cargo run --bin rustchat-cli
   ```

3. æ‰“å¼€ç¬¬äºŒä¸ªå®¢æˆ·ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰ï¼š
   ```bash
   cargo run --bin rustchat-cli
   ```

4. åœ¨ä»»ä¸€å®¢æˆ·ç«¯è®¾ç½®æ˜µç§°å¹¶å‘é€æ¶ˆæ¯ï¼Œå¦ä¸€ä¸ªå®¢æˆ·ç«¯ä¼šå®æ—¶æ”¶åˆ°ï¼

## ğŸ”§ å¼€å‘ç‰¹æ€§

### è®¾è®¡åŸåˆ™
- **ä½è€¦åˆ**: æ¨¡å—åŒ–è®¾è®¡ï¼Œå„ç»„ä»¶èŒè´£å•ä¸€
- **å¯æ‰©å±•**: é¢„ç•™æ‰©å±•æ¥å£ï¼Œæ”¯æŒæœªæ¥åŠŸèƒ½æ·»åŠ 
- **ç±»å‹å®‰å…¨**: å¼ºç±»å‹ç³»ç»Ÿï¼Œç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥
- **å¼‚æ­¥ä¼˜å…ˆ**: åŸºäºTokioçš„é«˜æ€§èƒ½å¼‚æ­¥æ¶æ„

### æ ¸å¿ƒç»„ä»¶

#### rustchat-types
- å®šä¹‰å…±äº«çš„æ•°æ®ç±»å‹ (`UserId`, `Message`)
- æä¾›åºåˆ—åŒ–/ååºåˆ—åŒ–æ”¯æŒ
- ç±»å‹å®‰å…¨çš„UUIDå°è£…

#### rustchat-core  
- ç”¨æˆ·é…ç½®ç®¡ç†
- æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
- ä¸šåŠ¡é€»è¾‘å°è£…

#### rustchat-server
- WebSocketæœåŠ¡å™¨
- å®æ—¶æ¶ˆæ¯å¹¿æ’­
- è¿æ¥ç®¡ç†

#### rustchat-cli
- å‘½ä»¤è¡Œç•Œé¢
- ç”¨æˆ·äº¤äº’å¤„ç†
- æœ¬åœ°çŠ¶æ€ç®¡ç†

## ğŸ“ é…ç½®æ–‡ä»¶

ç”¨æˆ·é…ç½®æ–‡ä»¶ä½ç½®: `~/.rustchat/config.json`

ç¤ºä¾‹é…ç½®ï¼š
```json
{
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "nickname": "Alice",
  "version": "0.1.0"
}
```

## ğŸ” æ—¥å¿—å’Œè°ƒè¯•

é¡¹ç›®ä½¿ç”¨ `tracing` è¿›è¡Œæ—¥å¿—è®°å½•ã€‚è®¾ç½®ç¯å¢ƒå˜é‡å¯ä»¥è°ƒæ•´æ—¥å¿—çº§åˆ«ï¼š

```bash
# æ˜¾ç¤ºè¯¦ç»†æ—¥å¿—
RUST_LOG=debug cargo run --bin rustchatd

# æ˜¾ç¤ºç‰¹å®šæ¨¡å—æ—¥å¿—
RUST_LOG=rustchat_server=info cargo run --bin rustchatd
```

## ğŸ§ª è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šåŒ…çš„æµ‹è¯•
cargo test -p rustchat-types
cargo test -p rustchat-core
```